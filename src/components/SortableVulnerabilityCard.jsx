// SortableVulnerabilityCard.jsx
import { useSortable } from "@dnd-kit/sortable";
import { CSS } from "@dnd-kit/utilities";
import { VulnerabilityCard } from "./VulnerabilityCard.jsx";

export const SortableVulnerabilityCard = ({ vulnerability, onDelete, onEdit }) => {
  const { attributes, listeners, setNodeRef, transform, transition } = useSortable({
    id: vulnerability.id,
  });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };

  // Ensure unique code, date, and time for each card
  const enhancedVulnerability = {
    ...vulnerability,
    code: vulnerability.code || `V-${vulnerability.id}`,
    date: vulnerability.date || new Date().toLocaleDateString(),
    time: vulnerability.time || new Date().toLocaleTimeString(),
  };

  return (
    <div ref={setNodeRef} style={style} {...attributes} {...listeners}>
      <VulnerabilityCard
        vulnerability={enhancedVulnerability}
        onDelete={onDelete}
        onEdit={onEdit}   // âœ… pass onEdit down
      />
    </div>
  );
};
